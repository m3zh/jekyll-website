<!-- Global site tag (gtag.js) - Google Analytics -->
<!-- Only include in production -->
{% if site.google_analytics and jekyll.environment == 'development' %}

<!-- Add cookie consent css & js -->
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css" />
<script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js" data-cfasync="false"></script>

<script>
var cookiesAccepted = window.localStorage.cookiesAccepted
// Initialise cookie consent banner
if (cookiesAccepted !== true) {
window.cookieconsent.initialise({
  "palette": {
    "popup": {
      "background": "#eb6c44",
      "text": "#ffffff"
    },
    "button": {
      "background": "transparent",
      "text": "#f5d948",
      "border": "#f5d948"
    }
  },
  "type": "opt-out",
  "content": {
    "deny": "No, thanks"
  },
  onInitialise: function(status) {
    if(!this.hasConsented()) {
      cookiesAccepted = false;
      window['ga-disable-UA-176070923-1'] = true;
      location.reload();
      console.log('disable cookies');
    } else {
      cookiesAccepted = true;
      {% include ga.js %}
      location.reload();
      console.log('enable cookies');
    }
  },
  law: {
    regionalLaw: false,
  },
  location: true
  });
};

if (cookiesAccepted === true) {
  document.getElementsByClassName("cc-revoke")[0].style.display = "none";
}

console.log(cookiesAccepted)
</script>

{% endif %}
